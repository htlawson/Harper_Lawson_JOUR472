str_detect(disposition, "REP") ~ "Report",
str_detect(disposition, "SFD") ~ "Medical",
str_detect(disposition, "UTL") ~ "Unfound",
str_detect(disposition, "VAS") ~ "Vehicle-Secure",
str_detect(disposition, '22') ~ "Cancel",
str_detect(disposition, "Not recorded") ~ "NotRecorded",
str_detect(disposition, "CAN") ~ "Cancel",
str_detect(disposition, "ADV") ~ "Advised",
str_detect(disposition, "ARR") ~ "Arrest",
TRUE ~ disposition1
))
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- as.data.frame(vax) %>%
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_nam",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- as.data.frame(vax)
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_nam",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
View(vax)
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- as.data.frame(vax) %>%
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_nam",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- vax %>%
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_nam",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
vax <- vaxjson[["features"]][["attributes"]]
glimpse(vax)
vax <- vaxjson[["features"]][["attributes"]]
glimpse(vax)
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- vax %>%
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_nam",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
View(vaxjson)
View(vax)
View(vaxjson)
View(vax)
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- as.data.frame(vax)
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_nam",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- as.data.frame(vax) %>%
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_nam",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
#Add system date
vax$date <- Sys.Date()
#clean column names
vax <- clean_names(vax)
#Translate column name jargon
vax <- as.data.frame(vax) %>%
rename(Date = "date",
County_Name = "adh_covid19_vac_join_county_name",
County_Vax_Total =  "vac_demo_county_aggregate_count",
White_Total = "vac_demo_county_race0_total",
Black_Total= "vac_demo_county_race1_total",
Native_American_Total = "vac_demo_county_race2_total",
Asian_Total = "vac_demo_county_race3_total",
Pacific_Islander_Total = "vac_demo_county_race4_total",
Unk_Race_Total = "vac_demo_county_race5_total",
Other_Race_Total= "vac_demo_county_race6_total",
Hispanic_Total= "vac_demo_county_ethnicity_hispa",
Dose_1 = "vac_demo_county_dose_one",
Dose_2 = "vac_demo_county_dose_two",
Unk_Dose= "vac_demo_county_unk_dose",
Partial_Vax= "vac_demo_county_partially_immun",
Fully_Vax = "vac_demo_county_fully_immunized",
Hispanic_Partial_Vax = "vac_demo_county_partially_hispa",
Hispanic_Full_Vax = "vac_demo_county_fully_hispanic",
Population = "vac_demo_county_population",
County_Pct_Dose_1 = "vac_demo_county_percent_dose_1",
County_Pct_Dose_2 = "vac_demo_county_percent_dose_2",
County_Pct_Population = "vac_demo_county_percent_populat",
White_Partial_Pct= "vac_demo_county_partially_white",
Black_Partial_Pct= "vac_demo_county_partially_black",
Asian_Partial_Pct = "vac_demo_county_partially_aian",
Non_Hispanic_Partial_Pct= "vac_demo_county_partially_nhopi",
White_Full_Pct = "vac_demo_county_fully_white",
Black_Full_Pct = "vac_demo_county_fully_black",
Asian_Full_Pct= "vac_demo_county_fully_aian",
Non_Hispanic_Full_Pct = "vac_demo_county_fully_nhopi")
Nothing <- SF %>%
filter(disposition == "ND" | disposition == "GOA")
SF <- SF %>%
mutate(disposition1 = disposition)
SF$disposition1 <- str_replace_all(SF$disposition1, pattern=fixed('ABA'), replacement=fixed('Abated') )
#Again with ADM
SF$disposition1 <- str_replace_all(SF$disposition1, pattern=fixed('ADM'), replacement=fixed('Admonished') )
SF <- SF %>%
mutate(disposition1 = case_when(
str_detect(disposition, "CIT") ~ "Cited",
str_detect(disposition, "CRM") ~ "Criminal",
str_detect(disposition, "GOA") ~ "Gone",
str_detect(disposition, "HAN") ~ "Handled",
str_detect(disposition, "NCR") ~ "No_Criminal",
str_detect(disposition, "ND") ~ "No_Dispo",
str_detect(disposition, "NOM") ~ "No_Merit",
str_detect(disposition, "PAS") ~ "PlaceSecure",
str_detect(disposition, "REP") ~ "Report",
str_detect(disposition, "SFD") ~ "Medical",
str_detect(disposition, "UTL") ~ "Unfound",
str_detect(disposition, "VAS") ~ "Vehicle-Secure",
str_detect(disposition, '22') ~ "Cancel",
str_detect(disposition, "Not recorded") ~ "NotRecorded",
str_detect(disposition, "CAN") ~ "Cancel",
str_detect(disposition, "ADV") ~ "Advised",
str_detect(disposition, "ARR") ~ "Arrest",
TRUE ~ disposition1
))
Action <- SF %>%
count(disposition1, disposition) %>%
arrange(desc(n))
head(Action)
Action %>%
filter(n > 100) %>%
ggplot(aes(x = reorder(disposition1, n), y = n, fill=n)) +
geom_bar(stat = "identity", show.legend = FALSE) +
coord_flip() +    #this makes it a horizontal bar chart instead of vertical
labs(title = "Action on Homeless Calls, San Francisco",
subtitle = "SF PD Service Call Data, 3/2016-11/2019",
caption = "Graphic by Wells",
y="Number of Calls",
x="Action")
Types <- SF %>% count(original_crime_type_name) %>%
group_by(original_crime_type_name) %>%
arrange(desc(n))
head(Types)
# 915/919
# 915 Sleeper
# Some have commentary
# 915 Encampment
#convert all text to lowercase
SF$crime1 <- tolower(SF$original_crime_type_name)
#Replace / with a space
SF$crime1 <- gsub("/", " ", SF$crime1)
#Replace '
SF$crime1 <- gsub("'", "", SF$crime1)
#fix space in homeless complaint
SF$crime1 <- gsub("homeless complaint", "homeless_complaint", SF$crime1)
#split crime1 into three new columns
SF <- separate(data = SF, col = crime1, into = c("crime2", "crime3", "crime4"), sep = " ", extra = "merge", fill = "right")
#Clean Crime2
SF <- SF %>%
mutate(crime_cleaned = case_when(
str_detect(crime2, '919') ~ "sit_lying",
str_detect(crime2, '915') ~ "homeless_complaint",
str_detect(crime2, '915s') ~ "homeless_complaint",
str_detect(crime2, '915x') ~ "homeless_complaint",
str_detect(crime2, '909') ~ "interview",
str_detect(crime2, '902') ~ "aggress_solicit",
str_detect(crime2, '811') ~ "intoxicated",
str_detect(crime2, '601') ~ "trespasser",
str_detect(crime2, "aggressive") ~ "aggressive",
str_detect(crime2, "chop shop") ~ "chop_shop",
str_detect(crime2, "dog") ~ "dog",
str_detect(crime2, "drugs") ~ "drugs",
str_detect(crime2, "homeless_complaint") ~ "homeless_complaint",
str_detect(crime2, "music") ~ "music",
str_detect(crime2, "panhandling") ~ "panhandling",
str_detect(crime2, "poss") ~ "possession",
str_detect(crime2, "sleep") ~ "sleep",
str_detect(crime2, "tent") ~ "tent",
TRUE ~ ""
))
#convert all text to lowercase
SF$crime1 <- tolower(SF$original_crime_type_name)
#Replace / with a space
SF$crime1 <- gsub("/", " ", SF$crime1)
#Replace '
SF$crime1 <- gsub("'", "", SF$crime1)
#fix space in homeless complaint
SF$crime1 <- gsub("homeless complaint", "homeless_complaint", SF$crime1)
#split crime1 into three new columns
SF <- separate(data = SF, col = crime1, into = c("crime2", "crime3", "crime4"), sep = " ", extra = "merge", fill = "right")
#Clean Crime2
SF <- SF %>%
mutate(crime_cleaned = case_when(
str_detect(crime2, '919') ~ "sit_lying",
str_detect(crime2, '915') ~ "homeless_complaint",
str_detect(crime2, '915s') ~ "homeless_complaint",
str_detect(crime2, '915x') ~ "homeless_complaint",
str_detect(crime2, '909') ~ "interview",
str_detect(crime2, '902') ~ "aggress_solicit",
str_detect(crime2, '811') ~ "intoxicated",
str_detect(crime2, '601') ~ "trespasser",
str_detect(crime2, "aggressive") ~ "aggressive",
str_detect(crime2, "chop shop") ~ "chop_shop",
str_detect(crime2, "dog") ~ "dog",
str_detect(crime2, "drugs") ~ "drugs",
str_detect(crime2, "homeless_complaint") ~ "homeless_complaint",
str_detect(crime2, "music") ~ "music",
str_detect(crime2, "panhandling") ~ "panhandling",
str_detect(crime2, "poss") ~ "possession",
str_detect(crime2, "sleep") ~ "sleep",
str_detect(crime2, "tent") ~ "tent",
TRUE ~ ""
))
#count the offenses
#remember this is a partial total
SF %>%
count(crime_cleaned) %>%
arrange(desc(n))
#Look at the Types table: some columns have one code, some have two.
Types %>%
distinct()
SF %>%
count(crime_cleaned) %>%
filter(!crime_cleaned =="") %>%
filter(n > 30) %>%
ggplot(aes(x = reorder(crime_cleaned, n), y = n, fill=n)) +
geom_bar(stat = "identity", show.legend = FALSE) +
coord_flip() +    #this makes it a horizontal bar chart instead of vertical
labs(title = "Types of Complaints in 311 Calls",
subtitle = "SF PD Service Call Data, 3/2016-11/2019",
caption = "Graphic by Wells",
y="Types of Complaints",
x="Action")
SF <- SF %>%
mutate(yearmo = format(call_date, "%Y-%m"))
SF %>%
filter(grepl("ARR", disposition)) %>%
count(yearmo) %>%
group_by(yearmo) %>%
ggplot(aes(x = yearmo, y = n, fill=n)) +
geom_bar(stat = "identity", show.legend = FALSE) +
geom_smooth(method = lm, se=FALSE, color = "red") +
theme(axis.text.x = element_text(angle=90)) +
#Changes angle of x axis labels
#coord_flip() +    #this makes it a horizontal bar chart instead of vertical
labs(title = "Arrest Trends on Homeless Calls in San Francisco",
subtitle = "Arrests Based on SF PD Service Call Data by Month 2017-2019",
caption = "Graphic by Wells",
y="Number of Calls",
x="Year")
#format to hours
SF$hour <- hour(SF$call_date_time)
SF %>%
count(hour) %>%
group_by(hour) %>%
ggplot(aes(x = hour, y = n, fill=n)) +
geom_bar(stat = "identity", show.legend = FALSE) +
theme(axis.text.x = element_text(angle=90)) +
#Changes angle of x axis labels
#coord_flip() +    #this makes it a horizontal bar chart instead of vertical
labs(title = "Hours of Homeless Calls, San Francisco",
subtitle = "SF PD Service Call Data by Month 2017-2019",
caption = "Graphic by Wells",
y="Number of Calls",
x="Hour")
SF %>%
count(yearmo) %>%
group_by(yearmo) %>%
ggplot(aes(x = yearmo, y = n, fill=n)) +
geom_bar(stat = "identity") +
theme(axis.text.x = element_text(angle=90)) +
#Changes angle of x axis labels
#coord_flip() +    #this makes it a horizontal bar chart instead of vertical
labs(title = "Homeless Calls After 2017, San Francisco",
subtitle = "SF PD Service Call Data by Month 2017-2019",
caption = "Graphic by Wells",
y="Number of Calls",
x="Year")
SF <- SF %>%
mutate(weekday = wday(call_date, label=TRUE, abbr=FALSE))
Weekday_Count <- SF %>%
select(weekday, crime_id) %>%
count(weekday) %>%
arrange(desc(n))
Weekday_Count %>%
ggplot(aes(x = weekday, y = n, fill=n)) +
geom_bar(stat = "identity", show.legend = FALSE) +
theme(axis.text.x = element_text(angle=90)) +
#Changes angle of x axis labels
#coord_flip() +    #this makes it a horizontal bar chart instead of vertical
labs(title = "Homeless Calls By Weekday in San Francisco",
subtitle = "SF PD Service Call Data 2017-2019",
caption = "Graphic by Moore and Seiter",
y="Number of Calls",
x="Weekday")
SF <- rio::import("https://github.com/profrobwells/HomelessSP2020/blob/master/Data/SF_311_Jan29.xlsx?raw=true", which = "SF Police_Department_Calls_for_")
#convert all text to lowercase
SF$crime1 <- tolower(SF$original_crime_type_name)
View(SF)
#convert all text to lowercase
SF$crime1 <- tolower(SF$original_crime_type_name)
